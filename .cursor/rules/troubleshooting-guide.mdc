---
description: í”„ë¡œì íŠ¸ ê°œë°œ ë° ë°°í¬ ì‹œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ
---

# ë¬¸ì œ í•´ê²° ê°€ì´ë“œ (Troubleshooting Guide)

## ğŸš¨ ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°ì±…

### React Native ë¹Œë“œ ë¬¸ì œ

#### Android ë¹Œë“œ ì‹¤íŒ¨
```bash
# ë¬¸ì œ: Gradle ë¹Œë“œ ì‹¤íŒ¨, CMake ì—ëŸ¬
# í•´ê²°ì±…: ìºì‹œ ì •ë¦¬ ë° ì˜ì¡´ì„± ì¬ì„¤ì¹˜

cd mobile/android
./gradlew clean
./gradlew cleanBuildCache
rm -rf .gradle
rm -rf app/build

cd ..
rm -rf node_modules
yarn install

# React Native ìºì‹œ ì •ë¦¬
npx react-native start --reset-cache
```

#### iOS ë¹Œë“œ ì‹¤íŒ¨
```bash
# ë¬¸ì œ: CocoaPods ì„¤ì¹˜ ì‹¤íŒ¨, Xcode ë¹Œë“œ ì—ëŸ¬
# í•´ê²°ì±…: iOS í™˜ê²½ ì™„ì „ ì¬ì„¤ì •

cd mobile
rm -rf ios/build
rm -rf ios/Pods
rm -f ios/Podfile.lock

# CocoaPods ì¬ì„¤ì¹˜
npx pod-install ios

# ë˜ëŠ” ìˆ˜ë™ ì„¤ì¹˜
cd ios
pod deintegrate
pod install
```

#### Metro ë²ˆë“¤ëŸ¬ ë¬¸ì œ
```bash
# ë¬¸ì œ: Metro ì„œë²„ ì‹œì‘ ì‹¤íŒ¨, ë²ˆë“¤ë§ ì—ëŸ¬
# í•´ê²°ì±…: Metro ìºì‹œ ì •ë¦¬

npx react-native start --reset-cache
# ë˜ëŠ”
rm -rf /tmp/metro-*
rm -rf node_modules/.cache
```

### API í†µì‹  ë¬¸ì œ

#### 401 Unauthorized ì—ëŸ¬
```typescript
// ë¬¸ì œ: JWT í† í° ë§Œë£Œ ë˜ëŠ” ì˜ëª»ëœ í† í°
// í•´ê²°ì±…: í† í° ìƒíƒœ í™•ì¸ ë° ê°±ì‹ 

// 1. í† í° í™•ì¸
import AsyncStorage from '@react-native-async-storage/async-storage';

const checkTokens = async () => {
  const accessToken = await AsyncStorage.getItem('access_token');
  const refreshToken = await AsyncStorage.getItem('refresh_token');
  
  console.log('Access Token:', accessToken ? 'ì¡´ì¬í•¨' : 'ì—†ìŒ');
  console.log('Refresh Token:', refreshToken ? 'ì¡´ì¬í•¨' : 'ì—†ìŒ');
};

// 2. í† í° ì´ˆê¸°í™” (ë¡œê·¸ì•„ì›ƒ í›„ ì¬ë¡œê·¸ì¸)
const clearTokensAndRelogin = async () => {
  await AsyncStorage.multiRemove(['access_token', 'refresh_token']);
  // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
};
```

#### Network Request Failed
```typescript
// ë¬¸ì œ: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨, API ì„œë²„ ì ‘ê·¼ ë¶ˆê°€
// í•´ê²°ì±…: ë„¤íŠ¸ì›Œí¬ ë° API ì„¤ì • í™•ì¸

// 1. ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
import NetInfo from '@react-native-community/netinfo';

NetInfo.fetch().then(state => {
  console.log('Connection type:', state.type);
  console.log('Is connected:', state.isConnected);
});

// 2. API URL í™•ì¸
import Config from 'react-native-config';
console.log('API Base URL:', Config.API_BASE_URL);

// 3. ë¡œì»¬ ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸ (ê°œë°œ í™˜ê²½)
curl http://192.168.1.169:5010/api/health
```

#### CORS ì—ëŸ¬
```python
# ë¬¸ì œ: ë¸Œë¼ìš°ì €ì—ì„œ CORS ì •ì±… ìœ„ë°˜
# í•´ê²°ì±…: Flask CORS ì„¤ì • í™•ì¸

# back_end/app.py
from flask_cors import CORS

app = Flask(__name__)
CORS(app, origins=["*"])  # ê°œë°œìš© - í”„ë¡œë•ì…˜ì—ì„œëŠ” íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©

# ë˜ëŠ” íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©
CORS(app, origins=["http://localhost:3000", "https://yourdomain.com"])
```

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ì œ

#### MySQL ì—°ê²° ì‹¤íŒ¨
```python
# ë¬¸ì œ: MySQL ì„œë²„ ì—°ê²° ë¶ˆê°€
# í•´ê²°ì±…: ì—°ê²° ì„¤ì • ë° ì„œë²„ ìƒíƒœ í™•ì¸

# 1. MySQL ì„œë²„ ìƒíƒœ í™•ì¸
# Docker í™˜ê²½
docker-compose ps
docker-compose logs db

# ë¡œì»¬ MySQL
brew services list | grep mysql
sudo systemctl status mysql  # Linux

# 2. ì—°ê²° ì •ë³´ í™•ì¸
# back_end/config.py
import os
print(f"MySQL Host: {os.getenv('MYSQL_HOST')}")
print(f"MySQL Port: {os.getenv('MYSQL_PORT')}")
print(f"MySQL User: {os.getenv('MYSQL_USER')}")
print(f"MySQL Database: {os.getenv('MYSQL_DATABASE')}")

# 3. ì§ì ‘ ì—°ê²° í…ŒìŠ¤íŠ¸
mysql -h localhost -P 3306 -u root -p object_monitor
```

#### ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨
```python
# ë¬¸ì œ: SQLAlchemy í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨
# í•´ê²°ì±…: ìˆ˜ë™ í…Œì´ë¸” ìƒì„± ë° ë§ˆì´ê·¸ë ˆì´ì…˜

# Flask ì•± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰
from app import create_app
from models import db

app = create_app()
with app.app_context():
    # ëª¨ë“  í…Œì´ë¸” ì‚­ì œ í›„ ì¬ìƒì„±
    db.drop_all()
    db.create_all()
    
    # ê¸°ë³¸ ë°ì´í„° ìƒì„±
    from app import create_default_user, create_default_objects
    create_default_user()
    create_default_objects()
```

### Docker ë° ë°°í¬ ë¬¸ì œ

#### Docker ì´ë¯¸ì§€ ë¹Œë“œ ì‹¤íŒ¨
```bash
# ë¬¸ì œ: Docker ë¹Œë“œ ì¤‘ ì˜ì¡´ì„± ì„¤ì¹˜ ì‹¤íŒ¨
# í•´ê²°ì±…: Dockerfile ë° ì˜ì¡´ì„± í™•ì¸

# 1. Docker ìºì‹œ ì •ë¦¬
docker system prune -a

# 2. ë¹Œë“œ ë¡œê·¸ ìƒì„¸ í™•ì¸
docker build --no-cache --progress=plain -t object-monitor-backend ./back_end

# 3. ì˜ì¡´ì„± ë¬¸ì œ í•´ê²°
# requirements.txt ë²„ì „ ê³ ì •
pip freeze > requirements.txt

# 4. ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ ì‚¬ìš©
# Dockerfileì—ì„œ ë¹Œë“œ ìŠ¤í…Œì´ì§€ ë¶„ë¦¬
```

#### ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹¤íŒ¨
```bash
# ë¬¸ì œ: Docker ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹¤íŒ¨
# í•´ê²°ì±…: ë¡œê·¸ í™•ì¸ ë° ì„¤ì • ê²€í† 

# 1. ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker-compose logs backend
docker logs <container_id>

# 2. ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ê·¼
docker-compose exec backend bash
docker exec -it <container_id> bash

# 3. í¬íŠ¸ ì¶©ëŒ í™•ì¸
lsof -i :5010
netstat -tulpn | grep 5010

# 4. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
docker-compose exec backend env | grep MYSQL
```

### CI/CD íŒŒì´í”„ë¼ì¸ ë¬¸ì œ

#### Jenkins ë¹Œë“œ ì‹¤íŒ¨
```groovy
// ë¬¸ì œ: Jenkins íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì‹¤íŒ¨
// í•´ê²°ì±…: ë‹¨ê³„ë³„ ë””ë²„ê¹… ë° ë¡œê·¸ í™•ì¸

// 1. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
stage('Debug Environment') {
    steps {
        sh '''
            echo "Current directory: $(pwd)"
            echo "Node version: $(node --version)"
            echo "Java version: $(java -version)"
            echo "Android SDK: ${ANDROID_SDK_ROOT}"
            env | sort
        '''
    }
}

// 2. ì˜ì¡´ì„± ì„¤ì¹˜ í™•ì¸
stage('Verify Dependencies') {
    steps {
        sh '''
            cd mobile
            ls -la
            cat package.json | head -20
            yarn --version
        '''
    }
}
```

#### Android í‚¤ìŠ¤í† ì–´ ë¬¸ì œ
```bash
# ë¬¸ì œ: í‚¤ìŠ¤í† ì–´ íŒŒì¼ ì—†ìŒ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜
# í•´ê²°ì±…: í‚¤ìŠ¤í† ì–´ ìƒì„± ë° ì„¤ì • í™•ì¸

# 1. ìƒˆ í‚¤ìŠ¤í† ì–´ ìƒì„±
keytool -genkey -v -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000

# 2. í‚¤ìŠ¤í† ì–´ ì •ë³´ í™•ì¸
keytool -list -keystore my-upload-key.keystore

# 3. Jenkins Credentials í™•ì¸
# Jenkins > Manage Credentials > Global > android_keystore íŒŒì¼ ì—…ë¡œë“œ
# ANDROID_KEYSTORE_PASSWORD, ANDROID_KEY_PASSWORD ì„¤ì • í™•ì¸
```

### ì„±ëŠ¥ ë° ë©”ëª¨ë¦¬ ë¬¸ì œ

#### React Native ì•± í¬ë˜ì‹œ
```typescript
// ë¬¸ì œ: ì•± ì‹¤í–‰ ì¤‘ ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ í¬ë˜ì‹œ
// í•´ê²°ì±…: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”

// 1. ì´ë¯¸ì§€ ìµœì í™”
import { Image } from 'react-native';

// í° ì´ë¯¸ì§€ëŠ” ë¦¬ì‚¬ì´ì¦ˆ
<Image 
  source={{uri: imageUrl}} 
  style={{width: 200, height: 200}}
  resizeMode="cover"
/>

// 2. ë¦¬ìŠ¤íŠ¸ ê°€ìƒí™”
import { FlatList } from 'react-native';

<FlatList
  data={largeDataSet}
  renderItem={renderItem}
  keyExtractor={item => item.id}
  removeClippedSubviews={true}
  maxToRenderPerBatch={10}
  windowSize={10}
/>

// 3. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
useEffect(() => {
  const subscription = someService.subscribe();
  
  return () => {
    subscription.unsubscribe(); // ì •ë¦¬ í•¨ìˆ˜ í•„ìˆ˜
  };
}, []);
```

#### Flask ì„œë²„ ì„±ëŠ¥ ì €í•˜
```python
# ë¬¸ì œ: API ì‘ë‹µ ì†ë„ ì €í•˜
# í•´ê²°ì±…: ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”

# 1. ì¿¼ë¦¬ ìµœì í™”
from sqlalchemy.orm import joinedload

# N+1 ë¬¸ì œ í•´ê²°
objects = Object.query.options(
    joinedload(Object.detections)
).filter_by(user_id=user_id).all()

# 2. ì¸ë±ìŠ¤ ì¶”ê°€
class Detection(db.Model):
    object_id = db.Column(db.Integer, db.ForeignKey('objects.id'), nullable=False, index=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow, index=True)

# 3. ìºì‹± ì ìš©
from flask_caching import Cache

cache = Cache(app, config={'CACHE_TYPE': 'simple'})

@cache.memoize(timeout=300)  # 5ë¶„ ìºì‹œ
def get_user_objects(user_id):
    return Object.query.filter_by(user_id=user_id).all()
```

## ğŸ”§ ë””ë²„ê¹… ë„êµ¬ ë° ëª…ë ¹ì–´

### React Native ë””ë²„ê¹…
```bash
# 1. ë¡œê·¸ í™•ì¸
# Android
adb logcat | grep ReactNativeJS
adb logcat -s ReactNativeJS,OkHttp

# iOS
xcrun simctl spawn booted log stream --predicate 'process == "mobile"'

# 2. ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ëª¨ë‹ˆí„°ë§
# Flipper ì‚¬ìš© (ê°œë°œ í™˜ê²½)
# Chrome DevTools (ì›¹ ë””ë²„ê¹…)

# 3. ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§
npx react-native run-android --variant=release
# Flipper Performance íƒ­ì—ì„œ í™•ì¸
```

### Flask ë””ë²„ê¹…
```python
# 1. ë¡œê¹… ì„¤ì •
import logging

logging.basicConfig(level=logging.DEBUG)
app.logger.setLevel(logging.DEBUG)

# 2. SQL ì¿¼ë¦¬ ë¡œê¹…
app.config['SQLALCHEMY_ECHO'] = True

# 3. ìš”ì²­/ì‘ë‹µ ë¡œê¹…
@app.before_request
def log_request_info():
    app.logger.debug('Request: %s %s', request.method, request.url)
    app.logger.debug('Headers: %s', request.headers)
    if request.data:
        app.logger.debug('Body: %s', request.data)

@app.after_request
def log_response_info(response):
    app.logger.debug('Response: %s', response.status)
    return response
```

### Docker ë””ë²„ê¹…
```bash
# 1. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker ps -a
docker-compose ps

# 2. ë¡œê·¸ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
docker-compose logs -f backend
docker logs -f <container_name>

# 3. ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ê·¼
docker-compose exec backend bash
docker exec -it <container_id> /bin/sh

# 4. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
docker network ls
docker network inspect <network_name>

# 5. ë³¼ë¥¨ í™•ì¸
docker volume ls
docker volume inspect <volume_name>
```

## ğŸ“ ê¸´ê¸‰ ìƒí™© ëŒ€ì‘

### í”„ë¡œë•ì…˜ ì„œë²„ ë‹¤ìš´
```bash
# 1. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
systemctl status docker
docker-compose ps

# 2. ë¡œê·¸ í™•ì¸
docker-compose logs --tail=100 backend
journalctl -u docker -f

# 3. ë¹ ë¥¸ ë³µêµ¬
# ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
docker-compose down
docker-compose up -d

# 4. ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… í™•ì¸
docker-compose exec db mysqldump -u root -p object_monitor > backup.sql
```

### ë°ì´í„° ì†ì‹¤ ìœ„í—˜
```bash
# 1. ì¦‰ì‹œ ë°±ì—…
docker-compose exec db mysqldump -u root -p --all-databases > emergency_backup.sql

# 2. ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬
docker-compose exec -T db mysql -u root -p < backup.sql

# 3. íŒŒì¼ ì‹œìŠ¤í…œ ë°±ì—…
tar -czf uploads_backup.tar.gz back_end/uploads/
```

### ë³´ì•ˆ ì‚¬ê³  ëŒ€ì‘
```bash
# 1. ì„œë¹„ìŠ¤ ì¦‰ì‹œ ì¤‘ë‹¨
docker-compose down

# 2. ë¡œê·¸ ë³´ì¡´
cp -r /var/log/docker/ /backup/incident_logs/
docker-compose logs > incident_docker_logs.txt

# 3. ë¹„ë°€ë²ˆí˜¸ ë° í‚¤ ë³€ê²½
# JWT ì‹œí¬ë¦¿ í‚¤ ë³€ê²½
# ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
# API í‚¤ ì¬ë°œê¸‰

# 4. ë³´ì•ˆ íŒ¨ì¹˜ ì ìš© í›„ ì¬ì‹œì‘
docker-compose pull
docker-compose up -d
```

ì´ ê°€ì´ë“œë¥¼ ì°¸ì¡°í•˜ì—¬ ê°œë°œ ë° ë°°í¬ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ì„ ì‹ ì†í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ë¡œê·¸ë¥¼ ìì„¸íˆ í™•ì¸í•˜ê³  ë‹¨ê³„ë³„ë¡œ ë””ë²„ê¹…ì„ ì§„í–‰í•˜ì„¸ìš”.